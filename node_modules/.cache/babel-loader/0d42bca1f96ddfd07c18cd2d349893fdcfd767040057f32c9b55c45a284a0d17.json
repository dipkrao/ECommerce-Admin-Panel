{"ast":null,"code":"import _objectSpread from\"/Users/deepakyadav/Documents/ECommerce-Admin-Panel/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import axios from\"axios\";// Create axios instance with base configuration\nconst api=axios.create({baseURL:process.env.REACT_APP_API_URL||\"http://localhost:5000/api\",timeout:10000,headers:{\"Content-Type\":\"application/json\"}});// Request interceptor to add auth token\napi.interceptors.request.use(config=>{var _config$method;console.log(\"API Request:\",(_config$method=config.method)===null||_config$method===void 0?void 0:_config$method.toUpperCase(),config.url);console.log(\"Request data:\",config.data);console.log(\"Request headers:\",config.headers);const token=localStorage.getItem(\"adminToken\");if(token&&!token.startsWith(\"demo-token-\")){config.headers.Authorization=\"Bearer \".concat(token);console.log(\"Using real token:\",token.substring(0,20)+\"...\");}else{console.log(\"Using demo token or no token:\",token);}// Remove Content-Type header for FormData to allow browser to set it with boundary\nif(config.data instanceof FormData){delete config.headers[\"Content-Type\"];console.log(\"Removed Content-Type header for FormData\");}return config;},error=>{console.error(\"Request interceptor error:\",error);return Promise.reject(error);});// Response interceptor for error handling\napi.interceptors.response.use(response=>{console.log(\"API Response:\",response.status,response.config.url);console.log(\"Response data:\",response.data);return response;},error=>{var _error$response,_error$config,_error$response2,_error$response2$data,_error$response3;console.error(\"API Error:\",(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status,(_error$config=error.config)===null||_error$config===void 0?void 0:_error$config.url);console.error(\"Error message:\",((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||error.message);console.error(\"Full error:\",error);if(((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.status)===401){// Token expired or invalid\nlocalStorage.removeItem(\"adminToken\");window.location.href=\"/login\";}return Promise.reject(error);});// API endpoints\nexport const authAPI={login:credentials=>api.post(\"/auth/admin/login\",credentials),register:userData=>api.post(\"/auth/register\",userData),getProfile:()=>api.get(\"/auth/profile\"),updateProfile:data=>api.put(\"/auth/profile\",data),changePassword:data=>api.put(\"/auth/change-password\",data)};export const productAPI={getAll:params=>api.get(\"/products\",{params}),getById:id=>api.get(\"/products/\".concat(id)),create:data=>api.post(\"/products\",data),update:(id,data)=>api.put(\"/products/\".concat(id),data),delete:id=>api.delete(\"/products/\".concat(id)),toggleStatus:id=>api.patch(\"/products/\".concat(id,\"/toggle-status\")),uploadImage:formData=>api.post(\"/products/upload\",formData,{headers:{\"Content-Type\":\"multipart/form-data\"}})};export const categoryAPI={getAll:()=>api.get(\"/categories\"),create:data=>api.post(\"/categories\",data),update:(id,data)=>api.put(\"/categories/\".concat(id),data),delete:id=>api.delete(\"/categories/\".concat(id))};export const orderAPI={getAll:params=>api.get(\"/orders\",{params}),getById:id=>api.get(\"/orders/\".concat(id)),updateStatus:(id,status)=>api.put(\"/orders/\".concat(id,\"/status\"),{status})};export const userAPI={getAll:()=>api.get(\"/users\"),getById:id=>api.get(\"/users/\".concat(id)),create:data=>api.post(\"/auth/register\",data),update:(id,data)=>api.put(\"/users/\".concat(id),data),delete:id=>api.delete(\"/users/\".concat(id))};export const bannerAPI={getAll:()=>api.get(\"/banners\"),getById:id=>api.get(\"/banners/\".concat(id)),create:data=>api.post(\"/banners\",data),update:(id,data)=>api.put(\"/banners/\".concat(id),data),delete:id=>api.delete(\"/banners/\".concat(id)),toggleStatus:id=>api.patch(\"/banners/\".concat(id,\"/toggle\")),reorder:bannerOrders=>api.post(\"/banners/reorder\",{bannerOrders})};export const legalAPI={getAll:()=>api.get(\"/legal\"),getByType:type=>api.get(\"/legal/\".concat(type)),update:(type,data)=>api.put(\"/legal/\".concat(type),data),create:(type,data)=>api.post(\"/legal\",_objectSpread({type},data))};export default api;","map":{"version":3,"names":["axios","api","create","baseURL","process","env","REACT_APP_API_URL","timeout","headers","interceptors","request","use","config","_config$method","console","log","method","toUpperCase","url","data","token","localStorage","getItem","startsWith","Authorization","concat","substring","FormData","error","Promise","reject","response","status","_error$response","_error$config","_error$response2","_error$response2$data","_error$response3","message","removeItem","window","location","href","authAPI","login","credentials","post","register","userData","getProfile","get","updateProfile","put","changePassword","productAPI","getAll","params","getById","id","update","delete","toggleStatus","patch","uploadImage","formData","categoryAPI","orderAPI","updateStatus","userAPI","bannerAPI","reorder","bannerOrders","legalAPI","getByType","type","_objectSpread"],"sources":["/Users/deepakyadav/Documents/ECommerce-Admin-Panel/src/utils/api.js"],"sourcesContent":["import axios from \"axios\";\n\n// Create axios instance with base configuration\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || \"http://localhost:5000/api\",\n  timeout: 10000,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use(\n  (config) => {\n    console.log(\"API Request:\", config.method?.toUpperCase(), config.url);\n    console.log(\"Request data:\", config.data);\n    console.log(\"Request headers:\", config.headers);\n\n    const token = localStorage.getItem(\"adminToken\");\n    if (token && !token.startsWith(\"demo-token-\")) {\n      config.headers.Authorization = `Bearer ${token}`;\n      console.log(\"Using real token:\", token.substring(0, 20) + \"...\");\n    } else {\n      console.log(\"Using demo token or no token:\", token);\n    }\n\n    // Remove Content-Type header for FormData to allow browser to set it with boundary\n    if (config.data instanceof FormData) {\n      delete config.headers[\"Content-Type\"];\n      console.log(\"Removed Content-Type header for FormData\");\n    }\n\n    return config;\n  },\n  (error) => {\n    console.error(\"Request interceptor error:\", error);\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor for error handling\napi.interceptors.response.use(\n  (response) => {\n    console.log(\"API Response:\", response.status, response.config.url);\n    console.log(\"Response data:\", response.data);\n    return response;\n  },\n  (error) => {\n    console.error(\"API Error:\", error.response?.status, error.config?.url);\n    console.error(\n      \"Error message:\",\n      error.response?.data?.message || error.message\n    );\n    console.error(\"Full error:\", error);\n\n    if (error.response?.status === 401) {\n      // Token expired or invalid\n      localStorage.removeItem(\"adminToken\");\n      window.location.href = \"/login\";\n    }\n    return Promise.reject(error);\n  }\n);\n\n// API endpoints\nexport const authAPI = {\n  login: (credentials) => api.post(\"/auth/admin/login\", credentials),\n  register: (userData) => api.post(\"/auth/register\", userData),\n  getProfile: () => api.get(\"/auth/profile\"),\n  updateProfile: (data) => api.put(\"/auth/profile\", data),\n  changePassword: (data) => api.put(\"/auth/change-password\", data),\n};\n\nexport const productAPI = {\n  getAll: (params) => api.get(\"/products\", { params }),\n  getById: (id) => api.get(`/products/${id}`),\n  create: (data) => api.post(\"/products\", data),\n  update: (id, data) => api.put(`/products/${id}`, data),\n  delete: (id) => api.delete(`/products/${id}`),\n  toggleStatus: (id) => api.patch(`/products/${id}/toggle-status`),\n  uploadImage: (formData) =>\n    api.post(\"/products/upload\", formData, {\n      headers: { \"Content-Type\": \"multipart/form-data\" },\n    }),\n};\n\nexport const categoryAPI = {\n  getAll: () => api.get(\"/categories\"),\n  create: (data) => api.post(\"/categories\", data),\n  update: (id, data) => api.put(`/categories/${id}`, data),\n  delete: (id) => api.delete(`/categories/${id}`),\n};\n\nexport const orderAPI = {\n  getAll: (params) => api.get(\"/orders\", { params }),\n  getById: (id) => api.get(`/orders/${id}`),\n  updateStatus: (id, status) => api.put(`/orders/${id}/status`, { status }),\n};\n\nexport const userAPI = {\n  getAll: () => api.get(\"/users\"),\n  getById: (id) => api.get(`/users/${id}`),\n  create: (data) => api.post(\"/auth/register\", data),\n  update: (id, data) => api.put(`/users/${id}`, data),\n  delete: (id) => api.delete(`/users/${id}`),\n};\n\nexport const bannerAPI = {\n  getAll: () => api.get(\"/banners\"),\n  getById: (id) => api.get(`/banners/${id}`),\n  create: (data) => api.post(\"/banners\", data),\n  update: (id, data) => api.put(`/banners/${id}`, data),\n  delete: (id) => api.delete(`/banners/${id}`),\n  toggleStatus: (id) => api.patch(`/banners/${id}/toggle`),\n  reorder: (bannerOrders) => api.post(\"/banners/reorder\", { bannerOrders }),\n};\n\nexport const legalAPI = {\n  getAll: () => api.get(\"/legal\"),\n  getByType: (type) => api.get(`/legal/${type}`),\n  update: (type, data) => api.put(`/legal/${type}`, data),\n  create: (type, data) => api.post(\"/legal\", { type, ...data }),\n};\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}